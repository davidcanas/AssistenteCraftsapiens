<!DOCTYPE html>
<html lang="pt">
<head>
  <title>Stats Survival</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  
  <style>
    body { background-color: #23272A; color: white; }
    
    /* Card estilo Discord */
    .player-card {
        background-color: #2C2F33;
        border-radius: 8px;
        padding: 10px;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        border-left: 4px solid transparent; /* Borda lateral para destaque */
    }

    .mc-head {
        width: 48px;
        height: 48px;
        border-radius: 8px;
        margin-right: 15px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }

    .player-info h5 {
        margin: 0;
        font-size: 16px;
        font-weight: bold;
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .player-meta {
        margin: 0;
        font-size: 13px;
        color: #b9bbbe;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .meta-icon {
        width: 16px;
        height: 16px;
        border-radius: 50%;
    }
    
    .divider { width: 1px; height: 12px; background-color: #4f545c; }

    /* Cores dos Cargos */
    .rank-reitor { color: #00AAAA; }
    .rank-dev { color: #55FFFF; }
    .rank-admin { color: #AA0000; }
    .rank-professor { color: #55FF55; }
    .rank-moderador { color: #FF5555; }
    .rank-ajuda { color: #FFAA00; }
    .rank-premium { color: #00AA00; }
    .rank-vip { color: #FFFF55; }
    .rank-default { color: #FFFFFF; }
    .rank-town { color: #4fa3d1; }
  </style>
</head>
<body>

<div class="container mt-5">
    <h2 class="mb-4 text-center">Jogadores Online (<%= playerList.length %>)</h2>
    
    <div class="row">
        <% playerList.forEach(function(player) { 
             // Formatação simples de variaveis visuais
             const group = (player.group || "default").toLowerCase();
             const groupDisplay = group !== "default" ? group.charAt(0).toUpperCase() + group.slice(1) : "";
             const townName = player.towny && player.towny.townName ? player.towny.townName.replace(/_/g, " ") : null;
        %>
        
        <div class="col-md-6 col-lg-4">
            <div class="player-card">
                <img src="https://minotar.net/helm/<%= player.username %>/64.png" class="mc-head">
                
                <div class="player-info w-100">
                    <h5>
                        <% if(groupDisplay) { %>
                            <span class="rank-<%= group %>">[<%= groupDisplay %>]</span>
                        <% } %>
                        <%= player.nickname || player.username %>
                    </h5>
                    
                    <div class="player-meta">
                        
                        <% if (player.discord) { %>
                            <div title="Discord Vinculado" style="display: flex; align-items: center;">
                                <img src="<%= player.discord.avatar %>" class="meta-icon me-1">
                                <span><%= player.discord.tag %></span>
                            </div>
                        <% } else { %>
                            <span style="opacity: 0.5; font-size: 11px;">Não vinculado</span>
                        <% } %>

                        <% if (townName) { %>
                            <% if (player.discord) { %> <div class="divider"></div> <% } %>
                            <div title="Cidade" style="display: flex; align-items: center;">
                                <img src="https://cdn-icons-png.freepik.com/256/2942/2942149.png" class="meta-icon me-1">
                                <span class="rank-town"><%= townName %></span>
                            </div>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>
        <% }); %>
    </div>
</div>

</body>
</html>